<html>
<head>
  <title>Todos - Jasper MVC</title>
  <link rel="stylesheet" type="text/css" href="/css/main.css" />
</head>
<body>
  <div id="views"></div>

  <script type="text/template" id="appTemplate">
    <div id="tasks">
      <h1>Todos</h1>
      <form>
        <input name="title" type="text" id="newTodoText" placeholder="What needs to be done?" data-action="enter:todo/add">
      </form>
      <div class="items"> 
        @JasperMvc.Controller.executeAction({ controller: "todo", action: "list" })
      </div>
      @JasperMvc.Controller.executeAction({ controller: "todo", action: "summary" })
    </div>
  </script>

  <script type="text/template" id="todoListTemplate">
    @model.forEach(function(todo) {
      <div class="item @(todo.isComplete ? "done" : "")">
        <div class="view" title="Double click to edit...">
          <form>
            <input data-action="click:todo/update/@todo.id" 
              name="isComplete" @(todo.isComplete ? "checked" : "") 
              type="checkbox">          
            <span>@todo.title</span> 
            <a class="destroy" data-action="click:todo/remove/@todo.id"></a>       
          </form>
        </div>
      </div>
    })
  </script>

  <script type="text/template" id="todoFooterTemplate">
    <footer>
      <a class="clear" style="display: @(model.canClear ? "block" : "none")" 
        data-action="click:todo/removeCompleted">Clear completed</a>
      <div class="count">
        <span class="countVal">@model.count</span> left
      </div>
    </footer>
  </script>
</body>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/libs/vash.js"></script>
<script type="text/javascript" src="/jasper-mvc.js"></script>
<script type="text/javascript" src="controller.js"></script>
<script type="text/javascript" src="routes.js"></script>

<script type="text/javascript">
  JasperMvc.Settings.setAppSelector("#views");
  JasperMvc.Run();
</script>

</html>
